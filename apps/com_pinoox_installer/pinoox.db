SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for com_pinoox_manager_notification
-- ----------------------------
DROP TABLE IF EXISTS `com_pinoox_manager_notification`;
CREATE TABLE `com_pinoox_manager_notification`  (
                                                    `ntf_id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
                                                    `app` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                                                    `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
                                                    `message` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                                                    `action_key` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                                                    `action_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                                                    `insert_date` datetime NULL DEFAULT NULL,
                                                    `push_date` datetime NULL DEFAULT NULL,
                                                    `status` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
                                                    PRIMARY KEY (`ntf_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_bin ROW_FORMAT = Compact;


-- ----------------------------
-- Table structure for pincore_file
-- ----------------------------
DROP TABLE IF EXISTS `pincore_file`;
CREATE TABLE `pincore_file`
(
    `file_id`       int(11)                                          NOT NULL AUTO_INCREMENT,
    `user_id`       int(11) UNSIGNED                                 NULL DEFAULT NULL,
    `app`           varchar(80) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `file_group`    varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `file_realname` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `file_name`     varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `file_ext`      varchar(20) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `file_path`     varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `file_size`     double                                           NULL DEFAULT NULL,
    `file_date`     datetime                                      NULL DEFAULT NULL,
    `file_access`   varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    PRIMARY KEY (`file_id`) USING BTREE,
    INDEX `pincore_file_user_id` (`user_id`) USING BTREE
) ENGINE = InnoDB
  AUTO_INCREMENT = 1
  CHARACTER SET = utf8
  COLLATE = utf8_bin
  ROW_FORMAT = Compact;

-- ----------------------------
-- Table structure for pincore_session
-- ----------------------------
DROP TABLE IF EXISTS `pincore_session`;
CREATE TABLE `pincore_session`
(
    `session_id`     varchar(100) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
    `app`            varchar(80) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
    `session_data`   text CHARACTER SET utf8 COLLATE utf8_bin         NULL,
    `insert_date`    datetime                                      NULL DEFAULT NULL,
    `update_date`    datetime                                      NULL DEFAULT NULL,
    `ip`             varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `security_token` varchar(32) CHARACTER SET utf8 COLLATE utf8_bin  NULL DEFAULT NULL,
    `end_date`       datetime                                      NULL DEFAULT NULL,
    PRIMARY KEY (`session_id`, `app`) USING BTREE,
    INDEX `pincore_session_session_id` (`session_id`) USING BTREE
) ENGINE = InnoDB
  CHARACTER SET = utf8
  COLLATE = utf8_bin
  ROW_FORMAT = Compact;

-- ----------------------------
-- Table structure for pincore_token
-- ----------------------------
DROP TABLE IF EXISTS `pincore_token`;
CREATE TABLE `pincore_token`
(
    `token_key`       varchar(100) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
    `token_name`      varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `token_data`      text CHARACTER SET utf8 COLLATE utf8_bin         NULL,
    `app`             varchar(80) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
    `user_id`         int(10) UNSIGNED                                 NULL DEFAULT NULL,
    `ip`              varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `user_agent`      varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `insert_date`     datetime                                      NULL DEFAULT NULL,
    `expiration_date` datetime                                      NULL DEFAULT NULL,
    PRIMARY KEY (`token_key`, `app`) USING BTREE,
    INDEX `pincore_token_user_id` (`user_id`) USING BTREE
) ENGINE = InnoDB
  CHARACTER SET = utf8
  COLLATE = utf8_bin
  ROW_FORMAT = Compact;

-- ----------------------------
-- Table structure for pincore_user
-- ----------------------------
DROP TABLE IF EXISTS `pincore_user`;
CREATE TABLE `pincore_user`
(
    `user_id`       int(11) UNSIGNED                                 NOT NULL AUTO_INCREMENT,
    `session_id`    int(11) UNSIGNED                                 NULL DEFAULT NULL,
    `avatar_id`     int(11)                                          NULL DEFAULT NULL,
    `app`           varchar(80) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `fname`         varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `lname`         varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `username`      varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `password`      varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `email`         varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    `register_date` datetime                                      NULL DEFAULT NULL,
    `status`        varchar(20) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
    PRIMARY KEY (`user_id`) USING BTREE,
    INDEX `pincore_user_avatar_id` (`avatar_id`) USING BTREE
) ENGINE = InnoDB
  AUTO_INCREMENT = 1
  CHARACTER SET = utf8
  COLLATE = utf8_bin
  ROW_FORMAT = Compact;

-- ----------------------------
-- Foreign keys
-- ----------------------------
ALTER TABLE `pincore_token`
    ADD CONSTRAINT `pincore_token_user_id` FOREIGN KEY (`user_id`) REFERENCES `pincore_user` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE `pincore_user`
    ADD CONSTRAINT `pincore_user_avatar_id` FOREIGN KEY (`avatar_id`) REFERENCES `pincore_file` (`file_id`) ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE `pincore_file`
    ADD CONSTRAINT `pincore_file_user_id` FOREIGN KEY (`user_id`) REFERENCES `pincore_user` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE;

SET FOREIGN_KEY_CHECKS = 1;
